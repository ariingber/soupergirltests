<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">

  <title>Souper Girl Tests</title>
</head>
<body>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>
  <link href="https://cdn.snipcart.com/themes/2.0/base/snipcart.min.css" type="text/css" rel="stylesheet" />

  <div id="zip1Check" style="background:pink; height:100px;">
    <br>
    Enter your zipcode and see if we deliver 'Souper Cleanse' to you. (For now 1 is the only valid zipcode for tests)
    <form id="zip1form">
      <input id="zip1Input" type="text" />
      <input id="zip1BTN" type="submit"></input>
    </form>
    <div id="zip1Answer1" style="display:none;">
      <br>
      We do not deliver to you at this time but you can pickup your order from our Takoma location.  Proceed to checkout!
    </div>
    <div id="zip1Answer2" style="display:none;">
      <br>
      We do deliever to you!!  Proceed to checkout!
      <br>
    </div>
  </div>


  <div id="souperCleanse1">
    <div id="cleanse1Block" style="display: inline-block;
      width: 350px;
      height: 600px;
      overflow: hidden;
      margin: 10px;
      text-align:center;">
      <center>
        <img style="width:240px;" src="https://www.my7daydiet.com/images/wonder-soup.jpg" alt="">
      </center>
      <div style="text-decoration:underline;"> Souper 'Cleanse' 1 </div>
      <br>
      <div id="contentBox1" style="text-align:left; height:250px;">

        Each week's cleanse includes: 20 homemade, fully cooked soups
        A personalized daily menu and nutritional guide.
        Your "Cleanse" will be delivered on SCRIPT HERE between 4:00 and 8:00 PM or you can pick it up from our Takoma Location.
        <br><br>
        1 Week - $135<br>
        2 Weeks - $255<br>
        4 Weeks - $500<br>
        8 Weeks - $980
      </div>
      <button id="buyBTTN1">Checkout</button>

      <div id="deliveryOptionsBox" style="display:none; text-align:left; height:250px;">
        <div>Choose Pickup or Delivery</div>
        <select name="deliveryMethod" id="delOPTS">
          <option value="selectOne">Select one </option>
          <option value="pickup">I would like to pickup in Takoma</option>
          <option value="delivery">I would like to have it delievered</option>
        </select>
      </div>

      <div id="pickupBOXandBuyBTN" style="display:none;">
        <center id="pickupBOXCenter">
          <div id="pickupMessage1" class="pickupMessage" style="display:none;">Pickup Message 1 (could include actual address ect.)<br><br></div>
          <div id="pickupMessage2" class="pickupMessage" style="display:none;">Pickup Message 2 (failed zipcheck directed to pickup)<br><br></div>
          <button id="pickupCheckoutButton" style="display:none;">Add To Cart</button>
          <button id="pickupBackBTN" style="display:none;">Back</button>
        </center>
      </div>

      <div id="deliveryBOXandBuyBTN" style="display:none;">
        <center id="deliveryBOXCenter">
          <div id="deliveryMessage" style="display:none;"> Delivery Message 1<br><br></div>
          <div id="deliveryMessage2" style="display:none;">Yes we deliver to you!  Add Souper Cleanse to your Cart<br><br></div>
          <div id="zip2CodeBox" style="display:none;">
            Enter your zip to check if we deliver the Souper "Cleanse" to you. (For right now 1 is the only valid zipcode for tests)
            <form id="zip2form">
              <input id="zip2Input" type="text" /><br>
              <input id="zip2BTN" type="submit"></input>
            </form>
          </div>
          <button id="deliveryCheckoutButton" style="display:none;">Add to Cart</button>
          <button id="deliveryBackBTN" style="display:none;">Back</button>
        </center>
      </div>

    </div>
  </div>

  <script>
  $( document ).ready(function() {
    var zipOk = false;
    // first Zip Check
    function zip1check (){
      var okZips = ['1'];
      var value = document.getElementById('zip1Input').value;
      var found = okZips.includes(value);
      if (found) {
        zipOk = true;
        document.getElementById('zip1Answer1').style.display= 'none';
        document.getElementById('zip1Answer2').style.display= 'block';
      } else {
        zipOk = false;
        document.getElementById('zip1Answer1').style.display= 'block';
        document.getElementById('zip1Answer2').style.display= 'none';
      }
    }
    document.querySelector("#zip1form").addEventListener("submit", function(e){
      e.preventDefault();
      zip1check();
    });

  // 1) ON PAGE LOAD DELETE ANY SNIPCARTS IF NEED BE
    function clearSnipandBTNS () {
      if ( document.getElementById('snipcart') ) {
        var el = document.getElementById('snipcart');
        el.parentNode.removeChild(el);
      }
      if ( document.getElementById('COBTN') ) {
        var el = document.getElementById('COBTN');
        el.parentNode.removeChild(el);
      }
    };
    clearSnipandBTNS ();

  // 2) AFTER HITTING Checkout HIDES DIVS AND BRINGS IN DEVELIERY OPTIONS BOX
  function bringUpDeliveryOptionsBox () {
    document.getElementById('buyBTTN1').addEventListener('click', function() {
      document.getElementById('contentBox1').style.display = 'none';
      document.getElementById('buyBTTN1').style.display = 'none';
      document.getElementById('deliveryOptionsBox').style.display = 'block';
    })
  };
  bringUpDeliveryOptionsBox ();

  // 3) DELIEVER OR PICKUP CHOICE LOGIC
  function deliverPickupChoiceLogic () {
    document.querySelector('select[name="deliveryMethod"]').onchange=changeEventHandler;
      function changeEventHandler(event) {
        if (event.target.value === 'pickup') {
          document.getElementById('deliveryOptionsBox').style.display = 'none';
          document.getElementById('deliveryBOXandBuyBTN').style.display = 'none';
          document.getElementById('pickupBOXandBuyBTN').style.display = 'block';
          document.getElementById('pickupMessage1').style.display = 'block';
          document.getElementById('pickupCheckoutButton').style.display = 'block';
          document.getElementById('pickupBackBTN').style.display = 'block';
        }
        else if (event.target.value === 'delivery')  {
          document.getElementById('deliveryOptionsBox').style.display = 'none';

          if (zipOk) {
            document.getElementById('pickupBOXandBuyBTN').style.display = 'none';
            document.getElementById('deliveryBOXandBuyBTN').style.display = 'block';
            document.getElementById('deliveryMessage').style.display = 'block';
            document.getElementById('deliveryCheckoutButton').style.display = 'block';
            document.getElementById('deliveryBackBTN').style.display = 'block';
          }
          else {
            document.getElementById('pickupBOXandBuyBTN').style.display = 'none';
            document.getElementById('deliveryBOXandBuyBTN').style.display = 'block';
            document.getElementById('zip2CodeBox').style.display = 'block';
            document.getElementById('deliveryBackBTN').style.display = 'block';
          }
        }
    }
  };
  deliverPickupChoiceLogic ();

  // 4 a) SELECTED PICkUP NOW BACK BUTTON FUNCTION
  function pickupBackBTN () {
    document.getElementById('pickupBackBTN').addEventListener('click', function() {
      document.getElementById('deliveryOptionsBox').style.display = 'block';
      document.getElementById('pickupBOXandBuyBTN').style.display = 'none';
      document.getElementById('pickupMessage1').style.display = 'none';
      document.getElementById('pickupCheckoutButton').style.display = 'none';
      document.getElementById('pickupBackBTN').style.display = 'none';
      document.querySelector('select[name="deliveryMethod"]').value = 'selectOne';
    })
  };
  pickupBackBTN ();

  // 4 b) DELIVERY BACK BUTTON FUNCTION
  function deliveryBackBTN () {
    document.getElementById('deliveryBackBTN').addEventListener('click', function() {
      document.getElementById('deliveryOptionsBox').style.display = 'block';
      document.getElementById('deliveryBOXandBuyBTN').style.display = 'none';
      document.getElementById('deliveryMessage').style.display = 'none';
      document.getElementById('deliveryCheckoutButton').style.display = 'none';
      document.getElementById('deliveryBackBTN').style.display = 'none';
      document.querySelector('select[name="deliveryMethod"]').value = 'selectOne';
    })
  };
  deliveryBackBTN ();

  // 5) SELECTED DEVELIVERY NOW ZIP CODE CHECK
  function zip2check () {
    var okZips2 = ['1'];
    var value = document.getElementById('zip2Input').value;
    var found = okZips2.includes(value);
    if (found) {
      document.getElementById('pickupBOXandBuyBTN').style.display = 'none';
      document.getElementById('zip2CodeBox').style.display = 'none';
      document.getElementById('deliveryBOXandBuyBTN').style.display = 'block';
      document.getElementById('deliveryMessage2').style.display = 'block';
      document.getElementById('deliveryCheckoutButton').style.display = 'block';
      document.getElementById('deliveryBackBTN').style.display = 'block';
    } else {
      document.getElementById('deliveryBOXandBuyBTN').style.display = 'none';
      document.getElementById('deliveryBackBTN').style.display = 'none';
      document.getElementById('zip2CodeBox').style.display = 'none';
      document.getElementById('pickupBOXandBuyBTN').style.display = 'block';
      document.getElementById('pickupMessage2').style.display = 'block';
      document.getElementById('pickupCheckoutButton').style.display = 'block';
      document.getElementById('pickupBackBTN').style.display = 'block';
    }
  };
  document.querySelector("#zip2form").addEventListener("submit", function(e){
   e.preventDefault();
   zip2check();
  });

  // 6a) PICKUP checkout button click
  function pickupCheckoutBTN () {
    document.getElementById('pickupCheckoutButton').addEventListener('click', function() {

      function createPickupSnip() {
        if ( document.getElementById('snipcart') ) {
          var el = document.getElementById('snipcart');
          el.parentNode.removeChild(el);
        }
        if (typeof Snipcart !== "undefined") {
          Snipcart.api.items.clear();
        }
        var pickupCheckoutScript = document.createElement('script');
        pickupCheckoutScript.setAttribute('src','https://cdn.snipcart.com/scripts/2.0/snipcart.js?version=2');
        pickupCheckoutScript.setAttribute('type','text/javascript');
        pickupCheckoutScript.setAttribute('id','snipcart');
        pickupCheckoutScript.setAttribute('data-api-key','OWVlOGQxMTQtY2JiOC00ZWIwLWFlNzYtYmYxNjAxN2JkYWQ3NjM2MjQ0MDU4NjU2MTg1NDMw');
        pickupCheckoutScript.setAttribute('data-cart-custom1-name',"I understand the disclaimer and terms of use regarding the purchase of this product.");
        pickupCheckoutScript.setAttribute('data-cart-custom1-options','true|false');
        pickupCheckoutScript.setAttribute('data-cart-custom1-required','true');
        pickupCheckoutScript.setAttribute('data-cart-custom2-name','If you have allergies or dietary restrictions, please email us at cleanse@soupergirl.com.');
        document.head.appendChild(pickupCheckoutScript);
      };

      function createPickupButton () {
        if ( document.getElementById('COBTN') ) {
          var el = document.getElementById('COBTN');
          el.parentNode.removeChild(el);
        }
        if (typeof Snipcart !== "undefined") {
          Snipcart.api.items.clear();
        }
        var hiddenPickupCheckoutBTN = document.createElement('button');
        hiddenPickupCheckoutBTN.setAttribute('id', 'COBTN');
        hiddenPickupCheckoutBTN.setAttribute('class', 'snipcart-add-item');
        hiddenPickupCheckoutBTN.setAttribute('data-item-id', '2');
        hiddenPickupCheckoutBTN.setAttribute('data-item-name', 'Souper Cleanse 1 (Pickup)');
        hiddenPickupCheckoutBTN.setAttribute('data-item-price', '135.00');
        hiddenPickupCheckoutBTN.setAttribute('data-item-url', 'http://myapp.com/products/bacon2');
        hiddenPickupCheckoutBTN.setAttribute('data-item-description', 'If you have allergies or dietary restrictions, please email us at cleanse@soupergirl.com.');
        hiddenPickupCheckoutBTN.setAttribute('data-item-custom1-name', 'Weeks');
        hiddenPickupCheckoutBTN.setAttribute('data-item-custom1-options', '1|2[+120.00]|4[+365.00]|8[+845.00]');
        hiddenPickupCheckoutBTN.setAttribute('data-item-custom1-value', 'One Week');
        document.head.appendChild(hiddenPickupCheckoutBTN);
      };
      function firePickupButton () {
        document.getElementById('COBTN').click();
      };
      function closeSnipcart () {
        document.getElementById('snipcart-close').addEventListener('click', function() {
          if (typeof Snipcart !== "undefined") {
            Snipcart.api.items.clear();
          }
          if ( $('#snipcart') ) {
            $('#snipcart').remove();
          }
          if ( $('#delChkOutBTN') ) {
            $('#delChkOutBTN').remove();
          }
          if ( $('#COBTN') ) {
            $('#COBTN').remove();
          }
          window.location.reload();
        })
      }
      createPickupSnip();
      createPickupButton();
      setTimeout(function () {
        if (typeof Snipcart !== "undefined") {
          Snipcart.api.items.clear();
        }
        firePickupButton ();
      }, 1000);
      setTimeout(function () {
        closeSnipcart();
      }, 1500);
    })
  }
  pickupCheckoutBTN ();

  // 6b) DELIVERY checkout button click
  function deliveryCheckoutBTN () {
    document.getElementById('deliveryCheckoutButton').addEventListener('click', function() {

      function createDeliverySnip() {
        if ( document.getElementById('snipcart') ) {
          var el = document.getElementById('snipcart');
          el.parentNode.removeChild(el);
        }
        if (typeof Snipcart !== "undefined") {
          Snipcart.api.items.clear();
        }
        var deliveryCheckoutScript = document.createElement('script');
        deliveryCheckoutScript.setAttribute('src','https://cdn.snipcart.com/scripts/2.0/snipcart.js?version=1');
        deliveryCheckoutScript.setAttribute('type','text/javascript');
        deliveryCheckoutScript.setAttribute('id','snipcart');
        deliveryCheckoutScript.setAttribute('data-api-key','OWVlOGQxMTQtY2JiOC00ZWIwLWFlNzYtYmYxNjAxN2JkYWQ3NjM2MjQ0MDU4NjU2MTg1NDMw');
        deliveryCheckoutScript.setAttribute('data-cart-custom1-name','Delivery Address');
        deliveryCheckoutScript.setAttribute('data-cart-custom2-name','Delivery Address City');
        deliveryCheckoutScript.setAttribute('data-cart-custom3-name','Delivery Address State');
        deliveryCheckoutScript.setAttribute('data-cart-custom4-name','Delivery Address Zip');
        deliveryCheckoutScript.setAttribute('data-cart-custom5-name','Addtional Delivery Instructions');
        deliveryCheckoutScript.setAttribute('data-cart-custom6-name','I understand the disclaimer and terms of use regarding the purchase of this product.');
        deliveryCheckoutScript.setAttribute('data-cart-custom6-options','true|false');
        deliveryCheckoutScript.setAttribute('data-cart-custom6-required','true');
        deliveryCheckoutScript.setAttribute('data-cart-custom7-name','If you have allergies or dietary restrictions, please email us at cleanse@soupergirl.com.');
        document.head.appendChild(deliveryCheckoutScript);
      };

      function createDeliveryButton () {
        if ( document.getElementById('delChkOutBTN') ) {
          var el = document.getElementById('delChkOutBTN');
          el.parentNode.removeChild(el);
        }
        if (typeof Snipcart !== "undefined") {
          Snipcart.api.items.clear();
        }
        var hiddenDeliveryCheckoutBTN = document.createElement('button');
        hiddenDeliveryCheckoutBTN.setAttribute('id', 'delChkOutBTN');
        hiddenDeliveryCheckoutBTN.setAttribute('class', 'snipcart-add-item');
        hiddenDeliveryCheckoutBTN.setAttribute('data-item-id', '2');
        hiddenDeliveryCheckoutBTN.setAttribute('data-item-name', 'Souper Cleanse 1 (Delivery)');
        hiddenDeliveryCheckoutBTN.setAttribute('data-item-price', '135.00');
        hiddenDeliveryCheckoutBTN.setAttribute('data-item-url', 'http://myapp.com/products/bacon2');
        hiddenDeliveryCheckoutBTN.setAttribute('data-item-description', 'If you have allergies or dietary restrictions, please email us at cleanse@soupergirl.com.');
        hiddenDeliveryCheckoutBTN.setAttribute('data-item-custom1-name', 'Weeks');
        hiddenDeliveryCheckoutBTN.setAttribute('data-item-custom1-options', '1|2[+120.00]|4[+365.00]|8[+845.00]');
        hiddenDeliveryCheckoutBTN.setAttribute('data-item-custom1-value', 'One Week');
        document.head.appendChild(hiddenDeliveryCheckoutBTN);
      };
      function fireDeliveryButton () {
        document.getElementById('delChkOutBTN').click();
      };
      function closeSnipcart () {
        document.getElementById('snipcart-close').addEventListener('click', function() {
          if (typeof Snipcart !== "undefined") {
            Snipcart.api.items.clear();
          }
          if ( $('#snipcart') ) {
            $('#snipcart').remove();
          }
          if ( $('#delChkOutBTN') ) {
            $('#delChkOutBTN').remove();
          }
          if ( $('#COBTN') ) {
            $('#COBTN').remove();
          }
          window.location.reload();
        })
      }
      createDeliverySnip();
      createDeliveryButton();
      setTimeout(function () {
        if (typeof Snipcart !== "undefined") {
          Snipcart.api.items.clear();
        }
        fireDeliveryButton ();
      }, 1000);
      setTimeout(function () {
        closeSnipcart();
      }, 1500);
    })
  }
  deliveryCheckoutBTN ();

});
  </script>

</body>
</html>
